eina_test_src = files(
'eina_suite.c',
'eina_suite.h',
'eina_test_abi.c',
'eina_test_fp.c',
'eina_test_ustringshare.c',
'eina_test_ustr.c',
'eina_test_binshare.c',
'eina_test_binbuf.c',
'eina_test_debug.c',
'eina_test_inarray.c',
'eina_test_array.c',
'eina_test_clist.c',
'eina_test_error.c',
'eina_test_sched.c',
'eina_test_log.c',
'eina_test_magic.c',
'eina_test_inlist.c',
'eina_test_main.c',
'eina_test_counter.c',
'eina_test_lalloc.c',
'eina_test_hash.c',
'eina_test_iterator.c',
'eina_test_accessor.c',
'eina_test_module.c',
'eina_test_convert.c',
'eina_test_rbtree.c',
'eina_test_thread.c',
'eina_test_file.c',
'eina_test_benchmark.c',
'eina_test_mempool.c',
'eina_test_rectangle.c',
'eina_test_range.c',
'eina_test_list.c',
'eina_test_matrixsparse.c',
'eina_test_tiler.c',
'eina_test_strbuf.c',
'eina_test_str.c',
'eina_test_quadtree.c',
'eina_test_simple_xml_parser.c',
'eina_test_value.c',
'eina_test_cow.c',
'eina_test_barrier.c',
'eina_test_tmpstr.c',
'eina_test_trash.c',
'eina_test_lock.c',
'eina_test_xattr.c',
'eina_test_crc.c',
'eina_test_quad.c',
'eina_test_matrix.c',
'eina_test_quaternion.c',
'eina_test_vector.c',
'eina_test_bezier.c',
'eina_test_safepointer.c',
'eina_test_slice.c',
'eina_test_freeq.c',
'eina_test_slstr.c',
'eina_test_vpath.c',
'eina_test_abstract_content.c',
)

eina_test_exe = executable('eina_suite',
  include_directories : config_dir,
  sources : eina_test_src,
  dependencies: [m, check, eina],
  c_args : [
  '-DTESTS_WD="`pwd`"',
  '-DTESTS_BUILD_DIR="'+meson.current_build_dir()+'"',
  '-DTESTS_SRC_DIR="'+meson.current_source_dir()+'"']
)

test('eina', eina_test_exe,
  env : test_env,
)
